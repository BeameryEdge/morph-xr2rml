@prefix xrr: <http://i3s.unice.fr/xr2rml#> .
@prefix rr:  <http://www.w3.org/ns/r2rml#> .
@prefix ex:  <http://example.com/> .
@prefix rml: <http://semweb.mmlab.be/ns/rml#> .
@prefix ql:	 <http://semweb.mmlab.be/ns/ql#> .


<#TMWithTableName>
    a rr:TriplesMap;
    xrr:logicalSource [
        rr:tableName "student";
        xrr:referenceFormulation xrr:Column;
        rml:iterator "$.*";						# must be ignored
    ];
    rr:subjectMap [
    	rr:template "http://example.org/student/{id}-{Column(name)/XPath(\\/\\/LastName)}";
		rr:class ex:Student;
    ];
    rr:predicateObjectMap [
    	rr:predicate ex:activity;
    	rr:objectMap [ 
    	    xrr:reference "Column(comments)/JSONPath($.*.hobby)";
    	    rr:termType rr:Literal;
    	];
    ];
    rr:predicateObjectMap [
    	rr:predicate ex:names;
    	rr:objectMap [
    		rr:template "{Column(name)/XPath(\\/\\/FirstName)} {Column(name)/XPath(\\/\\/LastName)}";
    		rr:termType xrr:RdfList;
		];
    ].

<#SportBsk>
    a rr:TriplesMap;
    rr:logicalTable [
        rr:sqlQuery "select * from sport where id = 0";
    ];
    rr:subjectMap [ 
    	rr:template "http://example.org/sport/{id}";
		rr:class ex:Sport;
    ];
    rr:predicateObjectMap [
    	rr:predicate ex:name;
    	rr:objectMap [ rr:column "name"; ];
    ];
    rr:predicateObjectMap [
    	rr:predicate ex:code1;
    	rr:objectMap [ xrr:reference "Column(code)/CSV(1)"; ];
    ];
    rr:predicateObjectMap [
    	rr:predicate ex:colors;
    	rr:objectMap [
            xrr:reference "Column(shirt_colors)/JSONPath($.*)" ;
            rr:termType xrr:RdfBag;
        ];
    ].


# <#StudentB3>
    # a rr:TriplesMap;
    # rr:logicalTable [ rr:sqlQuery "select * from student where sport = 300"; ];
    # rr:subjectMap [ 
    	# rr:template "http://example.org/student/{id}";
		# rr:class ex:Student;
    # ];
    # rr:predicateObjectMap [
    	# rr:predicate ex:comments;
    	# rr:objectMap [
    		# rr:column "comments";
    		# xrr:parseType xrr:listOrMap; 
	    	# xrr:format xrr:XML;
    		# xrr:parse [
      			# xrr:parseType xrr:listOrMap;
	      		# xrr:parse [
    	  			# xrr:parseType xrr:listOrMap; 
        	  		# rr:termType xrr:RdfList;     
          		# ];  
          		# rr:termType xrr:RdfBag;
          	# ]; 
    	# ];
    # ].
    